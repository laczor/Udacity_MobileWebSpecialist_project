"use strict";!function(t){if(!t.fetch){var s={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};if(s.arrayBuffer)var e=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],r=function(t){return t&&DataView.prototype.isPrototypeOf(t)},o=ArrayBuffer.isView||function(t){return t&&-1<e.indexOf(Object.prototype.toString.call(t))};f.prototype.append=function(t,e){t=a(t),e=h(e);var r=this.map[t];this.map[t]=r?r+","+e:e},f.prototype.delete=function(t){delete this.map[a(t)]},f.prototype.get=function(t){return t=a(t),this.has(t)?this.map[t]:null},f.prototype.has=function(t){return this.map.hasOwnProperty(a(t))},f.prototype.set=function(t,e){this.map[a(t)]=h(e)},f.prototype.forEach=function(t,e){for(var r in this.map)this.map.hasOwnProperty(r)&&t.call(e,this.map[r],r,this)},f.prototype.keys=function(){var r=[];return this.forEach(function(t,e){r.push(e)}),u(r)},f.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),u(e)},f.prototype.entries=function(){var r=[];return this.forEach(function(t,e){r.push([e,t])}),u(r)},s.iterable&&(f.prototype[Symbol.iterator]=f.prototype.entries);var i=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];b.prototype.clone=function(){return new b(this,{body:this._bodyInit})},c.call(b.prototype),c.call(w.prototype),w.prototype.clone=function(){return new w(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new f(this.headers),url:this.url})},w.error=function(){var t=new w(null,{status:0,statusText:""});return t.type="error",t};var n=[301,302,303,307,308];w.redirect=function(t,e){if(-1===n.indexOf(e))throw new RangeError("Invalid status code");return new w(null,{status:e,headers:{location:t}})},t.Headers=f,t.Request=b,t.Response=w,t.fetch=function(r,n){return new Promise(function(o,t){var e=new b(r,n),i=new XMLHttpRequest;i.onload=function(){var t,n,e={status:i.status,statusText:i.statusText,headers:(t=i.getAllResponseHeaders()||"",n=new f,t.split(/\r?\n/).forEach(function(t){var e=t.split(":"),r=e.shift().trim();if(r){var o=e.join(":").trim();n.append(r,o)}}),n)};e.url="responseURL"in i?i.responseURL:e.headers.get("X-Request-URL");var r="response"in i?i.response:i.responseText;o(new w(r,e))},i.onerror=function(){t(new TypeError("Network request failed"))},i.ontimeout=function(){t(new TypeError("Network request failed"))},i.open(e.method,e.url,!0),"include"===e.credentials&&(i.withCredentials=!0),"responseType"in i&&s.blob&&(i.responseType="blob"),e.headers.forEach(function(t,e){i.setRequestHeader(e,t)}),i.send(void 0===e._bodyInit?null:e._bodyInit)})},t.fetch.polyfill=!0}function a(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function h(t){return"string"!=typeof t&&(t=String(t)),t}function u(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return s.iterable&&(t[Symbol.iterator]=function(){return t}),t}function f(e){this.map={},e instanceof f?e.forEach(function(t,e){this.append(e,t)},this):Array.isArray(e)?e.forEach(function(t){this.append(t[0],t[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function d(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function y(r){return new Promise(function(t,e){r.onload=function(){t(r.result)},r.onerror=function(){e(r.error)}})}function l(t){var e=new FileReader,r=y(e);return e.readAsArrayBuffer(t),r}function p(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function c(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t)if("string"==typeof t)this._bodyText=t;else if(s.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(s.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(s.searchParams&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(s.arrayBuffer&&s.blob&&r(t))this._bodyArrayBuffer=p(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!s.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t)&&!o(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=p(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):s.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},s.blob&&(this.blob=function(){var t=d(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?d(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(l)}),this.text=function(){var t,e,r,o=d(this);if(o)return o;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,r=y(e),e.readAsText(t),r;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),r=new Array(e.length),o=0;o<e.length;o++)r[o]=String.fromCharCode(e[o]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},s.formData&&(this.formData=function(){return this.text().then(m)}),this.json=function(){return this.text().then(JSON.parse)},this}function b(t,e){var r,o,n=(e=e||{}).body;if(t instanceof b){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new f(t.headers)),this.method=t.method,this.mode=t.mode,n||null==t._bodyInit||(n=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new f(e.headers)),this.method=(r=e.method||this.method||"GET",o=r.toUpperCase(),-1<i.indexOf(o)?o:r),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function m(t){var n=new FormData;return t.trim().split("&").forEach(function(t){if(t){var e=t.split("="),r=e.shift().replace(/\+/g," "),o=e.join("=").replace(/\+/g," ");n.append(decodeURIComponent(r),decodeURIComponent(o))}}),n}function w(t,e){e||(e={}),this.type="default",this.status="status"in e?e.status:200,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new f(e.headers),this.url=e.url||"",this._initBody(t)}}("undefined"!=typeof self?self:void 0);
"use strict";!function(t){if(!t.fetch){var s={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};if(s.arrayBuffer)var e=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],r=function(t){return t&&DataView.prototype.isPrototypeOf(t)},o=ArrayBuffer.isView||function(t){return t&&-1<e.indexOf(Object.prototype.toString.call(t))};f.prototype.append=function(t,e){t=a(t),e=h(e);var r=this.map[t];this.map[t]=r?r+","+e:e},f.prototype.delete=function(t){delete this.map[a(t)]},f.prototype.get=function(t){return t=a(t),this.has(t)?this.map[t]:null},f.prototype.has=function(t){return this.map.hasOwnProperty(a(t))},f.prototype.set=function(t,e){this.map[a(t)]=h(e)},f.prototype.forEach=function(t,e){for(var r in this.map)this.map.hasOwnProperty(r)&&t.call(e,this.map[r],r,this)},f.prototype.keys=function(){var r=[];return this.forEach(function(t,e){r.push(e)}),u(r)},f.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),u(e)},f.prototype.entries=function(){var r=[];return this.forEach(function(t,e){r.push([e,t])}),u(r)},s.iterable&&(f.prototype[Symbol.iterator]=f.prototype.entries);var i=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];b.prototype.clone=function(){return new b(this,{body:this._bodyInit})},c.call(b.prototype),c.call(w.prototype),w.prototype.clone=function(){return new w(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new f(this.headers),url:this.url})},w.error=function(){var t=new w(null,{status:0,statusText:""});return t.type="error",t};var n=[301,302,303,307,308];w.redirect=function(t,e){if(-1===n.indexOf(e))throw new RangeError("Invalid status code");return new w(null,{status:e,headers:{location:t}})},t.Headers=f,t.Request=b,t.Response=w,t.fetch=function(r,n){return new Promise(function(o,t){var e=new b(r,n),i=new XMLHttpRequest;i.onload=function(){var t,n,e={status:i.status,statusText:i.statusText,headers:(t=i.getAllResponseHeaders()||"",n=new f,t.split(/\r?\n/).forEach(function(t){var e=t.split(":"),r=e.shift().trim();if(r){var o=e.join(":").trim();n.append(r,o)}}),n)};e.url="responseURL"in i?i.responseURL:e.headers.get("X-Request-URL");var r="response"in i?i.response:i.responseText;o(new w(r,e))},i.onerror=function(){t(new TypeError("Network request failed"))},i.ontimeout=function(){t(new TypeError("Network request failed"))},i.open(e.method,e.url,!0),"include"===e.credentials&&(i.withCredentials=!0),"responseType"in i&&s.blob&&(i.responseType="blob"),e.headers.forEach(function(t,e){i.setRequestHeader(e,t)}),i.send(void 0===e._bodyInit?null:e._bodyInit)})},t.fetch.polyfill=!0}function a(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function h(t){return"string"!=typeof t&&(t=String(t)),t}function u(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return s.iterable&&(t[Symbol.iterator]=function(){return t}),t}function f(e){this.map={},e instanceof f?e.forEach(function(t,e){this.append(e,t)},this):Array.isArray(e)?e.forEach(function(t){this.append(t[0],t[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function d(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function y(r){return new Promise(function(t,e){r.onload=function(){t(r.result)},r.onerror=function(){e(r.error)}})}function l(t){var e=new FileReader,r=y(e);return e.readAsArrayBuffer(t),r}function p(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function c(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t)if("string"==typeof t)this._bodyText=t;else if(s.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(s.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(s.searchParams&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(s.arrayBuffer&&s.blob&&r(t))this._bodyArrayBuffer=p(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!s.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t)&&!o(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=p(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):s.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},s.blob&&(this.blob=function(){var t=d(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?d(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(l)}),this.text=function(){var t,e,r,o=d(this);if(o)return o;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,r=y(e),e.readAsText(t),r;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),r=new Array(e.length),o=0;o<e.length;o++)r[o]=String.fromCharCode(e[o]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},s.formData&&(this.formData=function(){return this.text().then(m)}),this.json=function(){return this.text().then(JSON.parse)},this}function b(t,e){var r,o,n=(e=e||{}).body;if(t instanceof b){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new f(t.headers)),this.method=t.method,this.mode=t.mode,n||null==t._bodyInit||(n=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new f(e.headers)),this.method=(r=e.method||this.method||"GET",o=r.toUpperCase(),-1<i.indexOf(o)?o:r),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function m(t){var n=new FormData;return t.trim().split("&").forEach(function(t){if(t){var e=t.split("="),r=e.shift().replace(/\+/g," "),o=e.join("=").replace(/\+/g," ");n.append(decodeURIComponent(r),decodeURIComponent(o))}}),n}function w(t,e){e||(e={}),this.type="default",this.status="status"in e?e.status:200,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new f(e.headers),this.url=e.url||"",this._initBody(t)}}("undefined"!=typeof self?self:void 0);
"use strict";!function(){function u(n){return new Promise(function(e,t){n.onsuccess=function(){e(n.result)},n.onerror=function(){t(n.error)}})}function i(n,o,r){var i,e=new Promise(function(e,t){u(i=n[o].apply(n,r)).then(e,t)});return e.request=i,e}function e(e,n,t){t.forEach(function(t){Object.defineProperty(e.prototype,t,{get:function(){return this[n][t]},set:function(e){this[n][t]=e}})})}function t(t,n,o,e){e.forEach(function(e){e in o.prototype&&(t.prototype[e]=function(){return i(this[n],e,arguments)})})}function n(t,n,o,e){e.forEach(function(e){e in o.prototype&&(t.prototype[e]=function(){return this[n][e].apply(this[n],arguments)})})}function o(e,o,t,n){n.forEach(function(n){n in t.prototype&&(e.prototype[n]=function(){return e=this[o],(t=i(e,n,arguments)).then(function(e){if(e)return new c(e,t.request)});var e,t})})}function r(e){this._index=e}function c(e,t){this._cursor=e,this._request=t}function s(e){this._store=e}function a(n){this._tx=n,this.complete=new Promise(function(e,t){n.oncomplete=function(){e()},n.onerror=function(){t(n.error)},n.onabort=function(){t(n.error)}})}function p(e,t,n){this._db=e,this.oldVersion=t,this.transaction=new a(n)}function f(e){this._db=e}e(r,"_index",["name","keyPath","multiEntry","unique"]),t(r,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),o(r,"_index",IDBIndex,["openCursor","openKeyCursor"]),e(c,"_cursor",["direction","key","primaryKey","value"]),t(c,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(n){n in IDBCursor.prototype&&(c.prototype[n]=function(){var t=this,e=arguments;return Promise.resolve().then(function(){return t._cursor[n].apply(t._cursor,e),u(t._request).then(function(e){if(e)return new c(e,t._request)})})})}),s.prototype.createIndex=function(){return new r(this._store.createIndex.apply(this._store,arguments))},s.prototype.index=function(){return new r(this._store.index.apply(this._store,arguments))},e(s,"_store",["name","keyPath","indexNames","autoIncrement"]),t(s,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),o(s,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),n(s,"_store",IDBObjectStore,["deleteIndex"]),a.prototype.objectStore=function(){return new s(this._tx.objectStore.apply(this._tx,arguments))},e(a,"_tx",["objectStoreNames","mode"]),n(a,"_tx",IDBTransaction,["abort"]),p.prototype.createObjectStore=function(){return new s(this._db.createObjectStore.apply(this._db,arguments))},e(p,"_db",["name","version","objectStoreNames"]),n(p,"_db",IDBDatabase,["deleteObjectStore","close"]),f.prototype.transaction=function(){return new a(this._db.transaction.apply(this._db,arguments))},e(f,"_db",["name","version","objectStoreNames"]),n(f,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(i){[s,r].forEach(function(e){e.prototype[i.replace("open","iterate")]=function(){var e,t=(e=arguments,Array.prototype.slice.call(e)),n=t[t.length-1],o=this._store||this._index,r=o[i].apply(o,t.slice(0,-1));r.onsuccess=function(){n(r.result)}}})}),[r,s].forEach(function(e){e.prototype.getAll||(e.prototype.getAll=function(e,n){var o=this,r=[];return new Promise(function(t){o.iterateCursor(e,function(e){e?(r.push(e.value),void 0===n||r.length!=n?e.continue():t(r)):t(r)})})})});var d={open:function(e,t,n){var o=i(indexedDB,"open",[e,t]),r=o.request;return r.onupgradeneeded=function(e){n&&n(new p(r.result,e.oldVersion,r.transaction))},o.then(function(e){return new f(e)})},delete:function(e){return i(indexedDB,"deleteDatabase",[e])}};"undefined"!=typeof module?(module.exports=d,module.exports.default=module.exports):self.idb=d}();
"use strict";!function(){function u(n){return new Promise(function(e,t){n.onsuccess=function(){e(n.result)},n.onerror=function(){t(n.error)}})}function i(n,o,r){var i,e=new Promise(function(e,t){u(i=n[o].apply(n,r)).then(e,t)});return e.request=i,e}function e(e,n,t){t.forEach(function(t){Object.defineProperty(e.prototype,t,{get:function(){return this[n][t]},set:function(e){this[n][t]=e}})})}function t(t,n,o,e){e.forEach(function(e){e in o.prototype&&(t.prototype[e]=function(){return i(this[n],e,arguments)})})}function n(t,n,o,e){e.forEach(function(e){e in o.prototype&&(t.prototype[e]=function(){return this[n][e].apply(this[n],arguments)})})}function o(e,o,t,n){n.forEach(function(n){n in t.prototype&&(e.prototype[n]=function(){return e=this[o],(t=i(e,n,arguments)).then(function(e){if(e)return new c(e,t.request)});var e,t})})}function r(e){this._index=e}function c(e,t){this._cursor=e,this._request=t}function s(e){this._store=e}function a(n){this._tx=n,this.complete=new Promise(function(e,t){n.oncomplete=function(){e()},n.onerror=function(){t(n.error)},n.onabort=function(){t(n.error)}})}function p(e,t,n){this._db=e,this.oldVersion=t,this.transaction=new a(n)}function f(e){this._db=e}e(r,"_index",["name","keyPath","multiEntry","unique"]),t(r,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),o(r,"_index",IDBIndex,["openCursor","openKeyCursor"]),e(c,"_cursor",["direction","key","primaryKey","value"]),t(c,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(n){n in IDBCursor.prototype&&(c.prototype[n]=function(){var t=this,e=arguments;return Promise.resolve().then(function(){return t._cursor[n].apply(t._cursor,e),u(t._request).then(function(e){if(e)return new c(e,t._request)})})})}),s.prototype.createIndex=function(){return new r(this._store.createIndex.apply(this._store,arguments))},s.prototype.index=function(){return new r(this._store.index.apply(this._store,arguments))},e(s,"_store",["name","keyPath","indexNames","autoIncrement"]),t(s,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),o(s,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),n(s,"_store",IDBObjectStore,["deleteIndex"]),a.prototype.objectStore=function(){return new s(this._tx.objectStore.apply(this._tx,arguments))},e(a,"_tx",["objectStoreNames","mode"]),n(a,"_tx",IDBTransaction,["abort"]),p.prototype.createObjectStore=function(){return new s(this._db.createObjectStore.apply(this._db,arguments))},e(p,"_db",["name","version","objectStoreNames"]),n(p,"_db",IDBDatabase,["deleteObjectStore","close"]),f.prototype.transaction=function(){return new a(this._db.transaction.apply(this._db,arguments))},e(f,"_db",["name","version","objectStoreNames"]),n(f,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(i){[s,r].forEach(function(e){e.prototype[i.replace("open","iterate")]=function(){var e,t=(e=arguments,Array.prototype.slice.call(e)),n=t[t.length-1],o=this._store||this._index,r=o[i].apply(o,t.slice(0,-1));r.onsuccess=function(){n(r.result)}}})}),[r,s].forEach(function(e){e.prototype.getAll||(e.prototype.getAll=function(e,n){var o=this,r=[];return new Promise(function(t){o.iterateCursor(e,function(e){e?(r.push(e.value),void 0===n||r.length!=n?e.continue():t(r)):t(r)})})})});var d={open:function(e,t,n){var o=i(indexedDB,"open",[e,t]),r=o.request;return r.onupgradeneeded=function(e){n&&n(new p(r.result,e.oldVersion,r.transaction))},o.then(function(e){return new f(e)})},delete:function(e){return i(indexedDB,"deleteDatabase",[e])}};"undefined"!=typeof module?(module.exports=d,module.exports.default=module.exports):self.idb=d}();
"use strict";var _createClass=function(){function r(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}return function(n,t,e){return t&&r(n.prototype,t),e&&r(n,e),n}}();function _classCallCheck(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}var dbPromise=window.idb.open("restaurant-db",1,function(n){n.objectStoreNames.contains("restaurants")||n.createObjectStore("restaurants",{keyPath:"id"})}),DBHelper=function(){function i(){_classCallCheck(this,i)}return _createClass(i,null,[{key:"fetchRestaurants",value:function(t){fetch(i.DATABASE_URL).then(function(n){return n.json()}).then(function(r){dbPromise.then(function(n){var t=n.transaction("restaurants","readwrite"),e=t.objectStore("restaurants");return r.map(function(n){e.put(n)}),t.complete}),t(null,r)}).catch(function(n){dbPromise.then(function(n){n.transaction("restaurants","readwrite").objectStore("restaurants").getAll().then(function(n){t(null,n)})})})}},{key:"fetchRestaurantById",value:function(t,e){fetch(i.DATABASE_URL+"/"+t).then(function(n){return n.json()}).then(function(n){e(null,n)}).catch(function(n){dbPromise.then(function(n){n.transaction("restaurants","readwrite").objectStore("restaurants").get(Number(t)).then(function(n){e(null,n)})})})}},{key:"fetchRestaurantByCuisine",value:function(r,u){i.fetchRestaurants(function(n,t){if(n)u(n,null);else{var e=t.filter(function(n){return n.cuisine_type==r});u(null,e)}})}},{key:"fetchRestaurantByNeighborhood",value:function(r,u){i.fetchRestaurants(function(n,t){if(n)u(n,null);else{var e=t.filter(function(n){return n.neighborhood==r});u(null,e)}})}},{key:"fetchRestaurantByCuisineAndNeighborhood",value:function(r,u,a){i.fetchRestaurants(function(n,t){if(n)a(n,null);else{var e=t;"all"!=r&&(e=e.filter(function(n){return n.cuisine_type==r})),"all"!=u&&(e=e.filter(function(n){return n.neighborhood==u})),a(null,e)}})}},{key:"fetchNeighborhoods",value:function(u){i.fetchRestaurants(function(n,e){if(n)u(n,null);else{var r=e.map(function(n,t){return e[t].neighborhood}),t=r.filter(function(n,t){return r.indexOf(n)==t});u(null,t)}})}},{key:"fetchCuisines",value:function(u){i.fetchRestaurants(function(n,e){if(n)u(n,null);else{var r=e.map(function(n,t){return e[t].cuisine_type}),t=r.filter(function(n,t){return r.indexOf(n)==t});u(null,t)}})}},{key:"urlForRestaurant",value:function(n){return"./restaurants?id="+n.id}},{key:"imageUrlForRestaurant",value:function(n){return"img/"+n.id+".jpg"}},{key:"mapMarkerForRestaurant",value:function(n,t){return new google.maps.Marker({position:n.latlng,title:n.name,url:i.urlForRestaurant(n),map:t,animation:google.maps.Animation.DROP})}},{key:"DATABASE_URL",get:function(){return"http://localhost:1337/restaurants"}}]),i}();
"use strict";var _createClass=function(){function r(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}return function(n,t,e){return t&&r(n.prototype,t),e&&r(n,e),n}}();function _classCallCheck(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}var dbPromise=window.idb.open("restaurant-db",1,function(n){n.objectStoreNames.contains("restaurants")||n.createObjectStore("restaurants",{keyPath:"id"})}),DBHelper=function(){function i(){_classCallCheck(this,i)}return _createClass(i,null,[{key:"fetchRestaurants",value:function(t){fetch(i.DATABASE_URL).then(function(n){return n.json()}).then(function(r){dbPromise.then(function(n){var t=n.transaction("restaurants","readwrite"),e=t.objectStore("restaurants");return r.map(function(n){e.put(n)}),t.complete}),t(null,r)}).catch(function(n){dbPromise.then(function(n){n.transaction("restaurants","readwrite").objectStore("restaurants").getAll().then(function(n){t(null,n)})})})}},{key:"fetchRestaurantById",value:function(t,e){fetch(i.DATABASE_URL+"/"+t).then(function(n){return n.json()}).then(function(n){e(null,n)}).catch(function(n){dbPromise.then(function(n){n.transaction("restaurants","readwrite").objectStore("restaurants").get(Number(t)).then(function(n){e(null,n)})})})}},{key:"fetchRestaurantByCuisine",value:function(r,u){i.fetchRestaurants(function(n,t){if(n)u(n,null);else{var e=t.filter(function(n){return n.cuisine_type==r});u(null,e)}})}},{key:"fetchRestaurantByNeighborhood",value:function(r,u){i.fetchRestaurants(function(n,t){if(n)u(n,null);else{var e=t.filter(function(n){return n.neighborhood==r});u(null,e)}})}},{key:"fetchRestaurantByCuisineAndNeighborhood",value:function(r,u,a){i.fetchRestaurants(function(n,t){if(n)a(n,null);else{var e=t;"all"!=r&&(e=e.filter(function(n){return n.cuisine_type==r})),"all"!=u&&(e=e.filter(function(n){return n.neighborhood==u})),a(null,e)}})}},{key:"fetchNeighborhoods",value:function(u){i.fetchRestaurants(function(n,e){if(n)u(n,null);else{var r=e.map(function(n,t){return e[t].neighborhood}),t=r.filter(function(n,t){return r.indexOf(n)==t});u(null,t)}})}},{key:"fetchCuisines",value:function(u){i.fetchRestaurants(function(n,e){if(n)u(n,null);else{var r=e.map(function(n,t){return e[t].cuisine_type}),t=r.filter(function(n,t){return r.indexOf(n)==t});u(null,t)}})}},{key:"urlForRestaurant",value:function(n){return"./restaurants?id="+n.id}},{key:"imageUrlForRestaurant",value:function(n){return"img/"+n.id+".jpg"}},{key:"mapMarkerForRestaurant",value:function(n,t){return new google.maps.Marker({position:n.latlng,title:n.name,url:i.urlForRestaurant(n),map:t,animation:google.maps.Animation.DROP})}},{key:"DATABASE_URL",get:function(){return"http://localhost:1337/restaurants"}}]),i}();
"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t,e){var n=function(i,d){if(d.getElementsByClassName){var u,f,m=d.documentElement,o=i.Date,a=i.HTMLPictureElement,r="addEventListener",y="getAttribute",n=i[r],z=i.setTimeout,s=i.requestAnimationFrame||z,l=i.requestIdleCallback,v=/^picture$/i,c=["load","error","lazyincluded","_lazyloaded"],g={},h=Array.prototype.forEach,p=function(t,e){return g[e]||(g[e]=new RegExp("(\\s|^)"+e+"(\\s|$)")),g[e].test(t[y]("class")||"")&&g[e]},b=function(t,e){p(t,e)||t.setAttribute("class",(t[y]("class")||"").trim()+" "+e)},C=function(t,e){var n;(n=p(t,e))&&t.setAttribute("class",(t[y]("class")||"").replace(n," "))},A=function t(e,n,i){var a=i?r:"removeEventListener";i&&t(e,n),c.forEach(function(t){e[a](t,n)})},E=function(t,e,n,i,a){var o=d.createEvent("CustomEvent");return n||(n={}),n.instance=u,o.initCustomEvent(e,!i,!a,n),t.dispatchEvent(o),o},_=function(t,e){var n;!a&&(n=i.picturefill||f.pf)?n({reevaluate:!0,elements:[t]}):e&&e.src&&(t.src=e.src)},w=function(t,e){return(getComputedStyle(t,null)||{})[e]},M=function(t,e,n){for(n=n||t.offsetWidth;n<f.minSize&&e&&!t._lazysizesWidth;)n=e.offsetWidth,e=e.parentNode;return n},N=(At=[],Et=Ct=[],(wt=function(t,e){pt&&!e?t.apply(this,arguments):(Et.push(t),bt||(bt=!0,(d.hidden?z:s)(_t)))})._lsFlush=_t=function(){var t=Et;for(Et=Ct.length?At:Ct,bt=!(pt=!0);t.length;)t.shift()();pt=!1},wt),t=function(n,t){return t?function(){N(n)}:function(){var t=this,e=arguments;N(function(){n.apply(t,e)})}},S=function(t){var e,n,i=function(){e=null,t()},a=function t(){var e=o.now()-n;e<99?z(t,99-e):(l||i)(i)};return function(){n=o.now(),e||(e=z(a,99))}};!function(){var t,e={lazyClass:"lazyload",loadedClass:"lazyloaded",loadingClass:"lazyloading",preloadClass:"lazypreload",errorClass:"lazyerror",autosizesClass:"lazyautosizes",srcAttr:"data-src",srcsetAttr:"data-srcset",sizesAttr:"data-sizes",minSize:40,customMedia:{},init:!0,expFactor:1.5,hFac:.8,loadMode:2,loadHidden:!0,ricTimeout:0,throttleDelay:125};for(t in f=i.lazySizesConfig||i.lazysizesConfig||{},e)t in f||(f[t]=e[t]);i.lazySizesConfig=f,z(function(){f.init&&x()})}();var e=(nt=/^img$/i,it=/^iframe$/i,at="onscroll"in i&&!/glebot/.test(navigator.userAgent),st=-1,lt=function t(e){rt--,e&&e.target&&A(e.target,t),(!e||rt<0||!e.target)&&(rt=0)},ct=function(t,e){var n,i=t,a="hidden"==w(d.body,"visibility")||"hidden"!=w(t,"visibility");for(I-=e,G+=e,q-=e,j+=e;a&&(i=i.offsetParent)&&i!=d.body&&i!=m;)(a=0<(w(i,"opacity")||1))&&"visible"!=w(i,"overflow")&&(n=i.getBoundingClientRect(),a=j>n.left&&q<n.right&&G>n.top-1&&I<n.bottom+1);return a},U=dt=function(){var t,e,n,i,a,o,r,s,l,c=u.elements;if((H=f.loadMode)&&rt<8&&(t=c.length)){e=0,st++,null==K&&("expand"in f||(f.expand=500<m.clientHeight&&500<m.clientWidth?500:370),J=f.expand,K=J*f.expFactor),ot<K&&rt<1&&2<st&&2<H&&!d.hidden?(ot=K,st=0):ot=1<H&&1<st&&rt<6?J:0;for(;e<t;e++)if(c[e]&&!c[e]._lazyRace)if(at)if((s=c[e][y]("data-expand"))&&(o=1*s)||(o=ot),l!==o&&(P=innerWidth+o*Q,$=innerHeight+o,r=-1*o,l=o),n=c[e].getBoundingClientRect(),(G=n.bottom)>=r&&(I=n.top)<=$&&(j=n.right)>=r*Q&&(q=n.left)<=P&&(G||j||q||I)&&(f.loadHidden||"hidden"!=w(c[e],"visibility"))&&(k&&rt<3&&!s&&(H<3||st<4)||ct(c[e],o))){if(gt(c[e]),a=!0,9<rt)break}else!a&&k&&!i&&rt<4&&st<4&&2<H&&(R[0]||f.preloadAfterLoad)&&(R[0]||!s&&(G||j||q||I||"auto"!=c[e][y](f.sizesAttr)))&&(i=R[0]||c[e]);else gt(c[e]);i&&!a&&gt(i)}},X=rt=ot=0,Y=f.throttleDelay,Z=f.ricTimeout,tt=function(){V=!1,X=o.now(),U()},et=l&&49<Z?function(){l(tt,{timeout:Z}),Z!==f.ricTimeout&&(Z=f.ricTimeout)}:t(function(){z(tt)},!0),ut=function(t){var e;(t=!0===t)&&(Z=33),V||(V=!0,(e=Y-(o.now()-X))<0&&(e=0),t||e<9?et():z(et,e))},mt=t(ft=function(t){b(t.target,f.loadedClass),C(t.target,f.loadingClass),A(t.target,yt),E(t.target,"lazyloaded")}),yt=function(t){mt({target:t.target})},zt=function(t){var e,n=t[y](f.srcsetAttr);(e=f.customMedia[t[y]("data-media")||t[y]("media")])&&t.setAttribute("media",e),n&&t.setAttribute("srcset",n)},vt=t(function(t,e,n,i,a){var o,r,s,l,c,d;(c=E(t,"lazybeforeunveil",e)).defaultPrevented||(i&&(n?b(t,f.autosizesClass):t.setAttribute("sizes",i)),r=t[y](f.srcsetAttr),o=t[y](f.srcAttr),a&&(s=t.parentNode,l=s&&v.test(s.nodeName||"")),d=e.firesLoad||"src"in t&&(r||o||l),c={target:t},d&&(A(t,lt,!0),clearTimeout(D),D=z(lt,2500),b(t,f.loadingClass),A(t,yt,!0)),l&&h.call(s.getElementsByTagName("source"),zt),r?t.setAttribute("srcset",r):o&&!l&&(it.test(t.nodeName)?function(e,n){try{e.contentWindow.location.replace(n)}catch(t){e.src=n}}(t,o):t.src=o),a&&(r||l)&&_(t,{src:o})),t._lazyRace&&delete t._lazyRace,C(t,f.lazyClass),N(function(){(!d||t.complete&&1<t.naturalWidth)&&(d?lt(c):rt--,ft(c))},!0)}),ht=function t(){if(!k){if(o.now()-O<999)return void z(t,999);var e=S(function(){f.loadMode=3,ut()});k=!0,f.loadMode=3,ut(),n("scroll",function(){3==f.loadMode&&(f.loadMode=2),e()},!0)}},{_:function(){O=o.now(),u.elements=d.getElementsByClassName(f.lazyClass),R=d.getElementsByClassName(f.lazyClass+" "+f.preloadClass),Q=f.hFac,n("scroll",ut,!0),n("resize",ut,!0),i.MutationObserver?new MutationObserver(ut).observe(m,{childList:!0,subtree:!0,attributes:!0}):(m[r]("DOMNodeInserted",ut,!0),m[r]("DOMAttrModified",ut,!0),setInterval(ut,999)),n("hashchange",ut,!0),["focus","mouseover","click","load","transitionend","animationend","webkitAnimationEnd"].forEach(function(t){d[r](t,ut,!0)}),/d$|^c/.test(d.readyState)?ht():(n("load",ht),d[r]("DOMContentLoaded",ut),z(ht,2e4)),u.elements.length?(dt(),N._lsFlush()):ut()},checkElems:ut,unveil:gt=function(t){var e,n=nt.test(t.nodeName),i=n&&(t[y](f.sizesAttr)||t[y]("sizes")),a="auto"==i;(!a&&k||!n||!t[y]("src")&&!t.srcset||t.complete||p(t,f.errorClass)||!p(t,f.lazyClass))&&(e=E(t,"lazyunveilread").detail,a&&W.updateElem(t,!0,t.offsetWidth),t._lazyRace=!0,rt++,vt(t,e,a,i,n))}}),W=(B=t(function(t,e,n,i){var a,o,r;if(t._lazysizesWidth=i,i+="px",t.setAttribute("sizes",i),v.test(e.nodeName||""))for(a=e.getElementsByTagName("source"),o=0,r=a.length;o<r;o++)a[o].setAttribute("sizes",i);n.detail.dataAttr||_(t,n.detail)}),F=function(t,e,n){var i,a=t.parentNode;a&&(n=M(t,a,n),i=E(t,"lazybeforesizes",{width:n,dataAttr:!!e}),i.defaultPrevented||(n=i.detail.width)&&n!==t._lazysizesWidth&&B(t,a,i,n))},{_:function(){T=d.getElementsByClassName(f.autosizesClass),n("resize",L)},checkElems:L=S(function(){var t,e=T.length;if(e)for(t=0;t<e;t++)F(T[t])}),updateElem:F}),x=function t(){t.i||(t.i=!0,W._(),e._())};return u={cfg:f,autoSizer:W,loader:e,init:x,uP:_,aC:b,rC:C,hC:p,fire:E,gW:M,rAF:N}}var T,B,F,L;var R,k,D,H,O,P,$,I,q,j,G,J,K,Q,U,V,X,Y,Z,tt,et,nt,it,at,ot,rt,st,lt,ct,dt,ut,ft,mt,yt,zt,vt,gt,ht;var pt,bt,Ct,At,Et,_t,wt}(t,t.document);t.lazySizes=n,"object"==("undefined"==typeof module?"undefined":_typeof(module))&&module.exports&&(module.exports=n)}(window);
"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t,e){var n=function(i,d){if(d.getElementsByClassName){var u,f,m=d.documentElement,o=i.Date,a=i.HTMLPictureElement,r="addEventListener",y="getAttribute",n=i[r],z=i.setTimeout,s=i.requestAnimationFrame||z,l=i.requestIdleCallback,v=/^picture$/i,c=["load","error","lazyincluded","_lazyloaded"],g={},h=Array.prototype.forEach,p=function(t,e){return g[e]||(g[e]=new RegExp("(\\s|^)"+e+"(\\s|$)")),g[e].test(t[y]("class")||"")&&g[e]},b=function(t,e){p(t,e)||t.setAttribute("class",(t[y]("class")||"").trim()+" "+e)},C=function(t,e){var n;(n=p(t,e))&&t.setAttribute("class",(t[y]("class")||"").replace(n," "))},A=function t(e,n,i){var a=i?r:"removeEventListener";i&&t(e,n),c.forEach(function(t){e[a](t,n)})},E=function(t,e,n,i,a){var o=d.createEvent("CustomEvent");return n||(n={}),n.instance=u,o.initCustomEvent(e,!i,!a,n),t.dispatchEvent(o),o},_=function(t,e){var n;!a&&(n=i.picturefill||f.pf)?n({reevaluate:!0,elements:[t]}):e&&e.src&&(t.src=e.src)},w=function(t,e){return(getComputedStyle(t,null)||{})[e]},M=function(t,e,n){for(n=n||t.offsetWidth;n<f.minSize&&e&&!t._lazysizesWidth;)n=e.offsetWidth,e=e.parentNode;return n},N=(At=[],Et=Ct=[],(wt=function(t,e){pt&&!e?t.apply(this,arguments):(Et.push(t),bt||(bt=!0,(d.hidden?z:s)(_t)))})._lsFlush=_t=function(){var t=Et;for(Et=Ct.length?At:Ct,bt=!(pt=!0);t.length;)t.shift()();pt=!1},wt),t=function(n,t){return t?function(){N(n)}:function(){var t=this,e=arguments;N(function(){n.apply(t,e)})}},S=function(t){var e,n,i=function(){e=null,t()},a=function t(){var e=o.now()-n;e<99?z(t,99-e):(l||i)(i)};return function(){n=o.now(),e||(e=z(a,99))}};!function(){var t,e={lazyClass:"lazyload",loadedClass:"lazyloaded",loadingClass:"lazyloading",preloadClass:"lazypreload",errorClass:"lazyerror",autosizesClass:"lazyautosizes",srcAttr:"data-src",srcsetAttr:"data-srcset",sizesAttr:"data-sizes",minSize:40,customMedia:{},init:!0,expFactor:1.5,hFac:.8,loadMode:2,loadHidden:!0,ricTimeout:0,throttleDelay:125};for(t in f=i.lazySizesConfig||i.lazysizesConfig||{},e)t in f||(f[t]=e[t]);i.lazySizesConfig=f,z(function(){f.init&&x()})}();var e=(nt=/^img$/i,it=/^iframe$/i,at="onscroll"in i&&!/glebot/.test(navigator.userAgent),st=-1,lt=function t(e){rt--,e&&e.target&&A(e.target,t),(!e||rt<0||!e.target)&&(rt=0)},ct=function(t,e){var n,i=t,a="hidden"==w(d.body,"visibility")||"hidden"!=w(t,"visibility");for(I-=e,G+=e,q-=e,j+=e;a&&(i=i.offsetParent)&&i!=d.body&&i!=m;)(a=0<(w(i,"opacity")||1))&&"visible"!=w(i,"overflow")&&(n=i.getBoundingClientRect(),a=j>n.left&&q<n.right&&G>n.top-1&&I<n.bottom+1);return a},U=dt=function(){var t,e,n,i,a,o,r,s,l,c=u.elements;if((H=f.loadMode)&&rt<8&&(t=c.length)){e=0,st++,null==K&&("expand"in f||(f.expand=500<m.clientHeight&&500<m.clientWidth?500:370),J=f.expand,K=J*f.expFactor),ot<K&&rt<1&&2<st&&2<H&&!d.hidden?(ot=K,st=0):ot=1<H&&1<st&&rt<6?J:0;for(;e<t;e++)if(c[e]&&!c[e]._lazyRace)if(at)if((s=c[e][y]("data-expand"))&&(o=1*s)||(o=ot),l!==o&&(P=innerWidth+o*Q,$=innerHeight+o,r=-1*o,l=o),n=c[e].getBoundingClientRect(),(G=n.bottom)>=r&&(I=n.top)<=$&&(j=n.right)>=r*Q&&(q=n.left)<=P&&(G||j||q||I)&&(f.loadHidden||"hidden"!=w(c[e],"visibility"))&&(k&&rt<3&&!s&&(H<3||st<4)||ct(c[e],o))){if(gt(c[e]),a=!0,9<rt)break}else!a&&k&&!i&&rt<4&&st<4&&2<H&&(R[0]||f.preloadAfterLoad)&&(R[0]||!s&&(G||j||q||I||"auto"!=c[e][y](f.sizesAttr)))&&(i=R[0]||c[e]);else gt(c[e]);i&&!a&&gt(i)}},X=rt=ot=0,Y=f.throttleDelay,Z=f.ricTimeout,tt=function(){V=!1,X=o.now(),U()},et=l&&49<Z?function(){l(tt,{timeout:Z}),Z!==f.ricTimeout&&(Z=f.ricTimeout)}:t(function(){z(tt)},!0),ut=function(t){var e;(t=!0===t)&&(Z=33),V||(V=!0,(e=Y-(o.now()-X))<0&&(e=0),t||e<9?et():z(et,e))},mt=t(ft=function(t){b(t.target,f.loadedClass),C(t.target,f.loadingClass),A(t.target,yt),E(t.target,"lazyloaded")}),yt=function(t){mt({target:t.target})},zt=function(t){var e,n=t[y](f.srcsetAttr);(e=f.customMedia[t[y]("data-media")||t[y]("media")])&&t.setAttribute("media",e),n&&t.setAttribute("srcset",n)},vt=t(function(t,e,n,i,a){var o,r,s,l,c,d;(c=E(t,"lazybeforeunveil",e)).defaultPrevented||(i&&(n?b(t,f.autosizesClass):t.setAttribute("sizes",i)),r=t[y](f.srcsetAttr),o=t[y](f.srcAttr),a&&(s=t.parentNode,l=s&&v.test(s.nodeName||"")),d=e.firesLoad||"src"in t&&(r||o||l),c={target:t},d&&(A(t,lt,!0),clearTimeout(D),D=z(lt,2500),b(t,f.loadingClass),A(t,yt,!0)),l&&h.call(s.getElementsByTagName("source"),zt),r?t.setAttribute("srcset",r):o&&!l&&(it.test(t.nodeName)?function(e,n){try{e.contentWindow.location.replace(n)}catch(t){e.src=n}}(t,o):t.src=o),a&&(r||l)&&_(t,{src:o})),t._lazyRace&&delete t._lazyRace,C(t,f.lazyClass),N(function(){(!d||t.complete&&1<t.naturalWidth)&&(d?lt(c):rt--,ft(c))},!0)}),ht=function t(){if(!k){if(o.now()-O<999)return void z(t,999);var e=S(function(){f.loadMode=3,ut()});k=!0,f.loadMode=3,ut(),n("scroll",function(){3==f.loadMode&&(f.loadMode=2),e()},!0)}},{_:function(){O=o.now(),u.elements=d.getElementsByClassName(f.lazyClass),R=d.getElementsByClassName(f.lazyClass+" "+f.preloadClass),Q=f.hFac,n("scroll",ut,!0),n("resize",ut,!0),i.MutationObserver?new MutationObserver(ut).observe(m,{childList:!0,subtree:!0,attributes:!0}):(m[r]("DOMNodeInserted",ut,!0),m[r]("DOMAttrModified",ut,!0),setInterval(ut,999)),n("hashchange",ut,!0),["focus","mouseover","click","load","transitionend","animationend","webkitAnimationEnd"].forEach(function(t){d[r](t,ut,!0)}),/d$|^c/.test(d.readyState)?ht():(n("load",ht),d[r]("DOMContentLoaded",ut),z(ht,2e4)),u.elements.length?(dt(),N._lsFlush()):ut()},checkElems:ut,unveil:gt=function(t){var e,n=nt.test(t.nodeName),i=n&&(t[y](f.sizesAttr)||t[y]("sizes")),a="auto"==i;(!a&&k||!n||!t[y]("src")&&!t.srcset||t.complete||p(t,f.errorClass)||!p(t,f.lazyClass))&&(e=E(t,"lazyunveilread").detail,a&&W.updateElem(t,!0,t.offsetWidth),t._lazyRace=!0,rt++,vt(t,e,a,i,n))}}),W=(B=t(function(t,e,n,i){var a,o,r;if(t._lazysizesWidth=i,i+="px",t.setAttribute("sizes",i),v.test(e.nodeName||""))for(a=e.getElementsByTagName("source"),o=0,r=a.length;o<r;o++)a[o].setAttribute("sizes",i);n.detail.dataAttr||_(t,n.detail)}),F=function(t,e,n){var i,a=t.parentNode;a&&(n=M(t,a,n),i=E(t,"lazybeforesizes",{width:n,dataAttr:!!e}),i.defaultPrevented||(n=i.detail.width)&&n!==t._lazysizesWidth&&B(t,a,i,n))},{_:function(){T=d.getElementsByClassName(f.autosizesClass),n("resize",L)},checkElems:L=S(function(){var t,e=T.length;if(e)for(t=0;t<e;t++)F(T[t])}),updateElem:F}),x=function t(){t.i||(t.i=!0,W._(),e._())};return u={cfg:f,autoSizer:W,loader:e,init:x,uP:_,aC:b,rC:C,hC:p,fire:E,gW:M,rAF:N}}var T,B,F,L;var R,k,D,H,O,P,$,I,q,j,G,J,K,Q,U,V,X,Y,Z,tt,et,nt,it,at,ot,rt,st,lt,ct,dt,ut,ft,mt,yt,zt,vt,gt,ht;var pt,bt,Ct,At,Et,_t,wt}(t,t.document);t.lazySizes=n,"object"==("undefined"==typeof module?"undefined":_typeof(module))&&module.exports&&(module.exports=n)}(window);
"use strict";var map,restaurants=void 0,neighborhoods=void 0,cuisines=void 0,markers=[];function startServiceWorker(){if(navigator.serviceWorker){navigator.serviceWorker.register("../sw.js",{scope:"/"}).then(function(e){navigator.serviceWorker.controller})}}function fetchNeighborhoods(){DBHelper.fetchNeighborhoods(function(e,n){e?console.error(e):(self.neighborhoods=n,fillNeighborhoodsHTML())})}function fillNeighborhoodsHTML(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.neighborhoods,t=document.getElementById("neighborhoods-select");e.forEach(function(e){var n=document.createElement("option");n.innerHTML=e,n.value=e,t.append(n)})}function fetchCuisines(){DBHelper.fetchCuisines(function(e,n){e?console.error(e):(self.cuisines=n,fillCuisinesHTML())})}function fillCuisinesHTML(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.cuisines,t=document.getElementById("cuisines-select");e.forEach(function(e){var n=document.createElement("option");n.innerHTML=e,n.value=e,t.append(n)})}function updateRestaurants(){var e=document.getElementById("cuisines-select"),n=document.getElementById("neighborhoods-select"),t=e.selectedIndex,r=n.selectedIndex,o=e[t].value,a=n[r].value;DBHelper.fetchRestaurantByCuisineAndNeighborhood(o,a,function(e,n){e?console.error(e):(resetRestaurants(n),fillRestaurantsHTML())})}function resetRestaurants(e){self.restaurants=[],document.getElementById("restaurants-list").innerHTML="",self.markers.forEach(function(e){return e.setMap(null)}),self.markers=[],self.restaurants=e}function fillRestaurantsHTML(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurants,n=document.getElementById("restaurants-list");e.forEach(function(e){n.append(createRestaurantHTML(e))}),addMarkersToMap()}function createRestaurantHTML(e){var n=document.createElement("li"),t=document.createElement("img");t.className="restaurant-img lazyload",t.alt="Restaurant of "+e.name+"with cuisine type of "+e.cuisine_type,t.setAttribute("data-src",DBHelper.imageUrlForRestaurant(e)),t.src="",n.append(t);var r=document.createElement("h2");r.innerHTML=e.name,n.append(r);var o=document.createElement("p");o.innerHTML=e.neighborhood,n.append(o);var a=document.createElement("p");a.innerHTML=e.address,n.append(a);var s=document.createElement("span");s.innerHTML="Link to the "+e.name;var i=document.createElement("a");return i.innerHTML="View Details",i.href=DBHelper.urlForRestaurant(e),i.append(s),n.append(i),n}function addMarkersToMap(){(0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurants).forEach(function(e){var n=DBHelper.mapMarkerForRestaurant(e,self.map);google.maps.event.addListener(n,"click",function(){window.location.href=n.url}),self.markers.push(n)})}window.onload=function(){document.querySelector("iframe").title="Google Maps"},startServiceWorker(),document.addEventListener("DOMContentLoaded",function(e){fetchNeighborhoods(),fetchCuisines()}),window.initMap=function(){self.map=new google.maps.Map(document.getElementById("map"),{zoom:12,center:{lat:40.722216,lng:-73.987501},scrollwheel:!1}),updateRestaurants()};
"use strict";function writeData(r,n){return dbPromise.then(function(t){var e=t.transaction(r,"readwrite");return e.objectStore(r).put(n),e.complete})}function readAllData(e){return dbPromise.then(function(t){return t.transaction(e,"readonly").objectStore(e).getAll()})}function clearAllData(r){return dbPromise.then(function(t){var e=t.transaction(r,"readwrite");return e.objectStore(r).clear(),e.complete})}function deleteItemFromData(r,n){dbPromise.then(function(t){var e=t.transaction(r,"readwrite");return e.objectStore(r).delete(n),e.complete}).then(function(){console.log("Item deleted!")})}
"use strict";function writeData(r,n){return dbPromise.then(function(t){var e=t.transaction(r,"readwrite");return e.objectStore(r).put(n),e.complete})}function readAllData(e){return dbPromise.then(function(t){return t.transaction(e,"readonly").objectStore(e).getAll()})}function clearAllData(r){return dbPromise.then(function(t){var e=t.transaction(r,"readwrite");return e.objectStore(r).clear(),e.complete})}function deleteItemFromData(r,n){dbPromise.then(function(t){var e=t.transaction(r,"readwrite");return e.objectStore(r).delete(n),e.complete}).then(function(){console.log("Item deleted!")})}